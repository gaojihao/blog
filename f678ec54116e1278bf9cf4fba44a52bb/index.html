<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.48">
    <title>05 JS 函数式编程 | lizhi1026.top</title><meta name="description" content="大前端知识分享网站">
    <link rel="preload" href="/assets/js/runtime~app.56da2130.js" as="script"><link rel="preload" href="/assets/css/styles.25f7fced.css" as="style"><link rel="preload" href="/assets/js/4666.93202135.js" as="script"><link rel="preload" href="/assets/js/app.942499dd.js" as="script"><link rel="prefetch" href="/assets/js/v-06800a30.f3dec077.js"><link rel="prefetch" href="/assets/js/v-0cec149c.bfb69549.js"><link rel="prefetch" href="/assets/js/v-7bf71e2f.445f559d.js"><link rel="prefetch" href="/assets/js/v-afcf349c.83e92e33.js"><link rel="prefetch" href="/assets/js/5830.c7d14f1b.js"><link rel="prefetch" href="/assets/js/v-41360372.686f3b5e.js"><link rel="prefetch" href="/assets/js/v-66c1598a.a282d5dd.js"><link rel="prefetch" href="/assets/js/v-26ed9ad3.92bb18be.js"><link rel="prefetch" href="/assets/js/v-0f53152a.d26dfc64.js"><link rel="prefetch" href="/assets/js/v-50d82b15.91ee28e4.js"><link rel="prefetch" href="/assets/js/v-dff859fc.f557570b.js"><link rel="prefetch" href="/assets/js/v-18509685.df423604.js"><link rel="prefetch" href="/assets/js/v-a922edc0.535a94a4.js"><link rel="prefetch" href="/assets/js/v-1d4c7ec0.cf60d8dd.js"><link rel="prefetch" href="/assets/js/v-77d53053.0a341438.js"><link rel="prefetch" href="/assets/js/v-d6494774.fc802c43.js"><link rel="prefetch" href="/assets/js/v-44577b2c.90b3dab6.js"><link rel="prefetch" href="/assets/js/v-60cb68ec.2b811fdb.js"><link rel="prefetch" href="/assets/js/v-6a8aaabc.b69ccc84.js"><link rel="prefetch" href="/assets/js/v-1d247778.1f704f62.js"><link rel="prefetch" href="/assets/js/v-eec6bdf2.9dfc99e5.js"><link rel="prefetch" href="/assets/js/v-5e3003f2.0480b37f.js"><link rel="prefetch" href="/assets/js/8079.c3bbc0d7.js"><link rel="prefetch" href="/assets/js/v-690d1ccf.210a0aaa.js"><link rel="prefetch" href="/assets/js/v-4eab4074.98636d52.js"><link rel="prefetch" href="/assets/js/v-226a117c.df5ea4f3.js"><link rel="prefetch" href="/assets/js/v-0dd0ed5c.48c3e5f6.js"><link rel="prefetch" href="/assets/js/v-2dc80c78.aebbc661.js"><link rel="prefetch" href="/assets/js/v-06ce03a3.393915e8.js"><link rel="prefetch" href="/assets/js/v-255f3c16.7dda2681.js"><link rel="prefetch" href="/assets/js/v-2acb2440.318dbfe2.js"><link rel="prefetch" href="/assets/js/v-5f1d9e81.908f219f.js"><link rel="prefetch" href="/assets/js/v-6ad26784.75e47cd3.js"><link rel="prefetch" href="/assets/js/v-01580f52.1b9475e7.js"><link rel="prefetch" href="/assets/js/v-1c4caef2.8e2d2a6d.js"><link rel="prefetch" href="/assets/js/v-5272b55f.d31a06ca.js"><link rel="prefetch" href="/assets/js/v-3e21a9cc.2bfdcc89.js"><link rel="prefetch" href="/assets/js/v-9f22f4ae.70636cc8.js"><link rel="prefetch" href="/assets/js/v-c95b0bb0.0c2e9386.js"><link rel="prefetch" href="/assets/js/v-3501e2d3.682a91f5.js"><link rel="prefetch" href="/assets/js/v-43870b30.c12b71f5.js"><link rel="prefetch" href="/assets/js/v-3e9755d6.7e26e47a.js"><link rel="prefetch" href="/assets/js/v-66d50acf.33f4a2d3.js"><link rel="prefetch" href="/assets/js/v-adc3e5f2.854489e9.js"><link rel="prefetch" href="/assets/js/v-26cdd7e2.e81a97c9.js"><link rel="prefetch" href="/assets/js/v-6d3cecb0.57f3cc41.js"><link rel="prefetch" href="/assets/js/v-7022f99e.9f5d8567.js"><link rel="prefetch" href="/assets/js/v-5953ceb8.e0f46831.js"><link rel="prefetch" href="/assets/js/v-24f73c0c.a3cec53b.js"><link rel="prefetch" href="/assets/js/v-222dd469.f2d22200.js"><link rel="prefetch" href="/assets/js/7534.7858fa5b.js"><link rel="prefetch" href="/assets/js/9330.a24ae1ea.js"><link rel="prefetch" href="/assets/js/v-52e63bcd.e76b3be6.js"><link rel="prefetch" href="/assets/js/v-ee220b6c.316962c1.js"><link rel="prefetch" href="/assets/js/1493.621b4732.js"><link rel="prefetch" href="/assets/js/v-42a882a6.e9bdd474.js"><link rel="prefetch" href="/assets/js/2872.274d6544.js"><link rel="prefetch" href="/assets/js/8427.53575c78.js"><link rel="prefetch" href="/assets/js/3238.c15e0c51.js"><link rel="prefetch" href="/assets/js/9163.9349bcf1.js"><link rel="prefetch" href="/assets/js/7042.9829b4c6.js"><link rel="prefetch" href="/assets/js/2994.73b50e07.js"><link rel="prefetch" href="/assets/js/v-09516126.809b320d.js"><link rel="prefetch" href="/assets/js/v-8daa1a0e.6f16aea4.js"><link rel="prefetch" href="/assets/js/v-1152bc8b.99b5d6fd.js"><link rel="prefetch" href="/assets/js/v-e355b60c.b46b7823.js"><link rel="prefetch" href="/assets/js/v-41507b24.e30e8d98.js"><link rel="prefetch" href="/assets/js/v-15534fdd.605934fb.js"><link rel="prefetch" href="/assets/js/v-3706649a.10e6f071.js"><link rel="prefetch" href="/assets/css/6286.styles.2808748c.css">
    <link rel="stylesheet" href="/assets/css/styles.25f7fced.css">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><header class="theme-header" is-logo="true"><a href="/" class="logo-link" style=""><img src="/images/logo-light.svg" alt class="logo"><strong class="title">lizhi1026.top</strong></a><!----><nav class="navbar"><i class="iconfont icon-menu menu-btn"></i><ul class="nav-list"><li class="nav-item"><div class="navbar-blogger"><div class="avatar"><img src="/images/avatar.jpg" alt="头像" title="头像"></div><div class="types"><a href="/categories/?category=all" class="type"><span class="text">分类</span><span class="num">52</span></a><div class="divider"></div><a href="/tags/?tag=all" class="type"><span class="text">标签</span><span class="num">52</span></a></div><div class="blogger"><div class="name">前端程序猿</div><p class="slogan" title="种一棵树最好的时间是十年前，其次是现在！">种一棵树最好的时间是十年前，其次是现在！</p></div></div></li><!--[--><li class="nav-link nav-item"><a href="/PostsLayout" class="navbar-item"><!----><span class="text">TypeScript学习笔记</span></a></li><li class="nav-link nav-item"><a href="/PostsLayout" class="navbar-item"><!----><span class="text">深入理解JavaScript</span></a></li><!--]--><li class="nav-link nav-item"><button class="theme-toggle"><i class="icon-sun iconfont"></i></button></li><li class="nav-link nav-item search-link"><a href="/search/" class="navbar-item"><i class="icon-search iconfont"></i><span class="text">搜索</span></a></li><li class="nav-item nav-medias"><div class="medias"><!--[--><a class="icon-email iconfont" href="lizhi1026@126.com" title="email" target="_blank"></a><a class="icon-github iconfont" href="https://github.com/gaojihao" title="github" target="_blank"></a><!--]--></div></li></ul></nav></header><!--[--><main class="theme-container theme-post-container"><aside class="post-aside"><ul class="menu-list"><!--[--><li id="01 深入 JavaScript 运行原理" class="menu-item"><a href="/4c4b0ea377b92a0003783aa0d5cf8bc8/" class="navbar-item"><!----><span class="text">01 深入 JavaScript 运行原理</span></a></li><li id="02 JS 内存管理和闭包" class="menu-item"><a href="/856b4bcb2027113073e25a4bff85e119/" class="navbar-item"><!----><span class="text">02 JS 内存管理和闭包</span></a></li><li id="03 JS 函数的 this 指向" class="menu-item"><a href="/0cd39fb70e0f2ca9faf4ee526f9e616e/" class="navbar-item"><!----><span class="text">03 JS 函数的 this 指向</span></a></li><li id="04 call、apply、bind" class="menu-item"><a href="/84eb2e0467d32f54a49e19e3f432c5f4/" class="navbar-item"><!----><span class="text">04 call、apply、bind</span></a></li><li id="05 JS 函数式编程" class="active menu-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/" class="router-link-active router-link-exact-active navbar-item"><!----><span class="text">05 JS 函数式编程</span></a></li><li id="06 JS 额外知识补充" class="menu-item"><a href="/f79d10f69ea68efbbfe1738916d7eff9/" class="navbar-item"><!----><span class="text">06 JS 额外知识补充</span></a></li><li id="07 深入 JS 面向对象 一" class="menu-item"><a href="/7178cfbd4eb2d730e93c68b97f5d94e8/" class="navbar-item"><!----><span class="text">07 深入 JS 面向对象 一</span></a></li><li id="08 深入 JS 面向对象 二" class="menu-item"><a href="/a4e6a517b4ec5a47965cd6cf67eb218a/" class="navbar-item"><!----><span class="text">08 深入 JS 面向对象 二</span></a></li><li id="09 深入 JS 面向对象继承" class="menu-item"><a href="/ad7f8c802df714eae7da323e2ced909e/" class="navbar-item"><!----><span class="text">09 深入 JS 面向对象继承</span></a></li><li id="10 JS 对象的方法补充" class="menu-item"><a href="/7a38cb54be902811fe8d07db448a008d/" class="navbar-item"><!----><span class="text">10 JS 对象的方法补充</span></a></li><li id="11 ES6 中类的使用" class="menu-item"><a href="/8c4ad459a070c46f8959cad7209d7bb9/" class="navbar-item"><!----><span class="text">11 ES6 中类的使用</span></a></li><li id="12 ES6 知识点讲解" class="menu-item"><a href="/f4259473db3d9f03896d064cee0709e0/" class="navbar-item"><!----><span class="text">12 ES6 知识点讲解</span></a></li><li id="13 ES7-ES12 知识点解析" class="menu-item"><a href="/528bbdd7ab4f010b4ece3abc1cf1996a/" class="navbar-item"><!----><span class="text">13 ES7-ES12 知识点解析</span></a></li><li id="14 Proxy-Reflect vue2-vue3 响应式原理" class="menu-item"><a href="/51b090dc86986d3e82b8e7d2afa6b7a5/" class="navbar-item"><!----><span class="text">14 Proxy-Reflect vue2-vue3 响应式原理</span></a></li><li id="15 响应式原理实现" class="menu-item"><a href="/4160c10e05a857abc57228e3e4b95c9e/" class="navbar-item"><!----><span class="text">15 响应式原理实现</span></a></li><li id="16 Promise 使用详解" class="menu-item"><a href="/79bda6359513634824b93e149ce60e5d/" class="navbar-item"><!----><span class="text">16 Promise 使用详解</span></a></li><li id="17 手写 Promise" class="menu-item"><a href="/b780e718ee01fcb2708e6564ce868edc/" class="navbar-item"><!----><span class="text">17 手写 Promise</span></a></li><li id="18 Iterator-Generator" class="menu-item"><a href="/41d8b9ad4680423fd62fa2e2c7c3c499/" class="navbar-item"><!----><span class="text">18 Iterator-Generator</span></a></li><!--]--></ul></aside><div class="theme-content post-container"><div class="post-wrapper"><i class="iconfont icon-book toc-btn"></i><i class="iconfont icon-menu aside-btn"></i><div class="markdown-body"><h1 class="post-title"><span>05 JS 函数式编程</span></h1><div class="post-info"><span class="post-info-item"><i class="iconfont icon-avatar" title="作者"></i> 前端程序猿</span><span class="post-info-item"><i class="iconfont icon-datetime" title="日期"></i> 2022-08-12</span><span class="post-info-item"><i class="iconfont icon-categorynormal" title="分类"></i><!--[--><a href="/categories/?category=%E5%A4%A7%E5%89%8D%E7%AB%AF" class="post-type">大前端</a><!--]--></span><span class="post-info-item"><i class="iconfont icon-tag" title="标签"></i><!--[--><a href="/tags/?tag=javascript" class="post-type">javascript</a><!--]--></span></div><div><p>函数式编程中有一个非常重要的概念叫纯函数，JavaScript 符合函数式编程的范式，所以也有纯函数的概念；</p><p>在 react 开发中纯函数是被多次提及的；比如 react 中组件就被要求像是一个纯函数（为什么是像，因为还有 class 组件），redux 中有一个 reducer 的概念，也 是要求必须是一个纯函数；所以掌握纯函数对于理解很多框架的设计是非常有帮助的；</p><h2 id="理解-javascript-纯函数" tabindex="-1"><a class="header-anchor" href="#理解-javascript-纯函数" aria-hidden="true">#</a> 理解 JavaScript 纯函数</h2><p>纯函数的维基百科定义：</p><ul><li>在程序设计中，若一个函数符合以下条件，那么这个函数被称为纯函数：</li><li>此函数在相同的输入值时，需产生相同的输出。</li><li>函数的输出和输入值以外的其他隐藏信息或状态无关，也和由 I/O 设备产生的外部输出无关。</li><li>该函数不能有语义上可观察的函数副作用，诸如“触发事件”，使输出设备输出，或更改输出值以外物件的内容等。</li></ul><p>当然上面的定义会过于的晦涩，所以我简单总结一下：</p><ul><li>确定的输入，一定会产生确定的输出；</li><li>函数在执行过程中，不能产生副作用；</li></ul><h2 id="副作用的理解" tabindex="-1"><a class="header-anchor" href="#副作用的理解" aria-hidden="true">#</a> 副作用的理解</h2><p>那么这里又有一个概念，叫做副作用，什么又是副作用呢？</p><p>副作用（side effect）其实本身是医学的一个概念，比如我们经常说吃什么药本来是为了治病，可能会产生一 些其他的副作用；</p><p>在计算机科学中，也引用了副作用的概念，表示在执行一个函数时，除了返回函数值之外，还产生 了附加的影响，比如修改了全局变量，修改参数或者改变外部的存储；</p><p>纯函数在执行的过程中就是不能产生这样的副作用：副作用往往是产生 bug 的 “温床”。</p><h2 id="纯函数的案例" tabindex="-1"><a class="header-anchor" href="#纯函数的案例" aria-hidden="true">#</a> 纯函数的案例</h2><p>我们来看一个对数组操作的两个函数：</p><p>slice：slice 截取数组时不会对原数组进行任何操作,而是生成一个新的数组；</p><p>slice 就是一个纯函数，不会修改传入的参数；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cba&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;nba&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dna&#39;</span><span class="token punctuation">]</span>

<span class="token comment">// slice只要给它传入一个start/end, 那么对于同一个数组来说, 它会给我们返回确定的值</span>
<span class="token comment">// slice函数本身它是不会修改原来的数组</span>
<span class="token comment">// slice -&gt; this</span>
<span class="token comment">// slice函数本身就是一个纯函数</span>
<span class="token keyword">var</span> newNames1 <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newNames1<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>splice：splice 截取数组, 会返回一个新的数组, 也会对原数组进行修改；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;cba&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;nba&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;dna&#39;</span><span class="token punctuation">]</span>
<span class="token comment">// splice在执行时, 有修改掉调用的数组对象本身, 修改的这个操作就是产生的副作用</span>
<span class="token comment">// splice不是一个纯函数</span>
<span class="token keyword">var</span> newNames2 <span class="token operator">=</span> names<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newNames2<span class="token punctuation">)</span> <span class="token comment">// [ &#39;nba&#39;, &#39;dna&#39; ]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>names<span class="token punctuation">)</span> <span class="token comment">// [ &#39;abc&#39;, &#39;cba&#39; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="纯函数的练习" tabindex="-1"><a class="header-anchor" href="#纯函数的练习" aria-hidden="true">#</a> 纯函数的练习</h2><p>foo 函数是否是一个纯函数?</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 1.相同的输入一定产生相同的输出</span>
<span class="token comment">// 2.在执行的过程中不会产生任何的副作用</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num1 <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> num2 <span class="token operator">*</span> num2
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>bar 不是一个纯函数, 因为它修改了外界的变量</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">&#39;abc&#39;</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;bar其他的代码执行&#39;</span><span class="token punctuation">)</span>
  name <span class="token operator">=</span> <span class="token string">&#39;cba&#39;</span>
<span class="token punctuation">}</span>

<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>baz 也不是一个纯函数, 因为我们修改了传入的参数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">baz</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  info<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;why&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">18</span> <span class="token punctuation">}</span>
<span class="token function">baz</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>test 是否是一个纯函数? 是一个纯函数</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>info<span class="token punctuation">,</span>
    <span class="token literal-property property">age</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;why&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="纯函数的优势" tabindex="-1"><a class="header-anchor" href="#纯函数的优势" aria-hidden="true">#</a> 纯函数的优势</h2><p>为什么纯函数在函数式编程中非常重要呢？因为你可以安心的编写和安心的使用；</p><p>你在写的时候保证了函数的纯度，只是单纯实现自己的业务逻辑即可，不需要关心传入的内容是如何获得的或 者依赖其他的外部变量是否已经发生了修改；</p><p>你在用的时候，你确定你的输入内容不会被任意篡改，并且自己确定的输入，一定会有确定的输出；</p><p>React 中就要求我们无论是函数还是 class 声明一个组件，这个组件都必须像纯函数一样，保护它们的 props 不被修 改：</p><h2 id="javascript-柯里化" tabindex="-1"><a class="header-anchor" href="#javascript-柯里化" aria-hidden="true">#</a> JavaScript 柯里化</h2><p>柯里化也是属于函数式编程里面一个非常重要的概念。</p><p>我们先来看一下维基百科的解释：</p><ul><li>在计算机科学中，柯里化（英语：Currying），又译为卡瑞化或加里化；</li><li>是把接收多个参数的函数，变成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参 数，而且返回结果的新函数的技术；</li><li>柯里化声称 “如果你固定某些参数，你将得到接受余下参数的一个函数”；</li></ul><p>维基百科的结束非常的抽象，我们这里做一个总结：</p><p>只传递给函数一部分参数来调用它，让它返回一个函数去处理剩余的参数；这个过程就称之为柯里化；</p><h2 id="柯里化的结构" tabindex="-1"><a class="header-anchor" href="#柯里化的结构" aria-hidden="true">#</a> 柯里化的结构</h2><p>那么柯里化到底是怎么样的表现呢？</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> result1 <span class="token operator">=</span> <span class="token function">sum1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result1<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>简化柯里化的代码</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sum2</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">z</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum2</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> <span class="token function-variable function">sum3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">z</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum3</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="让函数的职责单一" tabindex="-1"><a class="header-anchor" href="#让函数的职责单一" aria-hidden="true">#</a> 让函数的职责单一</h2><p>那么为什么需要有柯里化呢？</p><p>在函数式编程中，我们其实往往希望一个函数处理的问题尽可能的单一，而不是将一大堆的处理过程交给一个 函数来处理</p><p>那么我们是否就可以将每次传入的参数在单一的函数中进行处理，处理完后在下一个函数中再使用处理后的结 果；</p><p>比如上面的案例我们进行一个修改：传入的函数需要分别被进行如下处理</p><ul><li>第一个参数 + 2</li><li>第二个参数 <code>* 2</code></li><li>第三个参数 <code>** 2</code></li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span>

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    y <span class="token operator">=</span> y <span class="token operator">*</span> <span class="token number">2</span>

    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      z <span class="token operator">=</span> z <span class="token operator">*</span> z

      <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="柯里化的复用" tabindex="-1"><a class="header-anchor" href="#柯里化的复用" aria-hidden="true">#</a> 柯里化的复用</h2><p>另外一个使用柯里化的场景是可以帮助我们可以复用参数逻辑</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> m <span class="token operator">+</span> n
<span class="token punctuation">}</span>

<span class="token comment">// 假如在程序中,我们经常需要把5和另外一个数字进行相加</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1100</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">555</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>makeAdder 函数要求我们传入一个 num（并且如果我们需要的话，可以在这里对 num 进行一些修改）； 在之后使用返回的函数时，我们不需要再继续传入 num 了；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">makeAdder</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  count <span class="token operator">=</span> count <span class="token operator">*</span> count

  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> count <span class="token operator">+</span> num
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> adder5 <span class="token operator">=</span> <span class="token function">makeAdder</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token function">adder5</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token function">adder5</span><span class="token punctuation">(</span><span class="token number">14</span><span class="token punctuation">)</span>
<span class="token function">adder5</span><span class="token punctuation">(</span><span class="token number">1100</span><span class="token punctuation">)</span>
<span class="token function">adder5</span><span class="token punctuation">(</span><span class="token number">555</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="打印日志的柯里化" tabindex="-1"><a class="header-anchor" href="#打印日志的柯里化" aria-hidden="true">#</a> 打印日志的柯里化</h2><p>这里我们在演示一个案例，需求是打印一些日志：日志包括时间、类型、信息；</p><p>普通函数的实现方案如下：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">][</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]: [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;DEBUG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;查找到轮播图的bug&#39;</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;DEBUG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;查询菜单的bug&#39;</span><span class="token punctuation">)</span>
<span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&#39;DEBUG&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;查询数据的bug&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>柯里化的优化</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">log</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">date</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">message</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">][</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]: [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 如果我现在打印的都是当前时间</span>
<span class="token keyword">var</span> nowLog <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">nowLog</span><span class="token punctuation">(</span><span class="token string">&#39;DEBUG&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#39;查找到轮播图的bug&#39;</span><span class="token punctuation">)</span>
<span class="token function">nowLog</span><span class="token punctuation">(</span><span class="token string">&#39;FETURE&#39;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#39;新增了添加用户的功能&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> nowAndDebugLog <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#39;DEBUG&#39;</span><span class="token punctuation">)</span>
<span class="token function">nowAndDebugLog</span><span class="token punctuation">(</span><span class="token string">&#39;查找到轮播图的bug&#39;</span><span class="token punctuation">)</span>
<span class="token function">nowAndDebugLog</span><span class="token punctuation">(</span><span class="token string">&#39;查找到轮播图的bug&#39;</span><span class="token punctuation">)</span>
<span class="token function">nowAndDebugLog</span><span class="token punctuation">(</span><span class="token string">&#39;查找到轮播图的bug&#39;</span><span class="token punctuation">)</span>
<span class="token function">nowAndDebugLog</span><span class="token punctuation">(</span><span class="token string">&#39;查找到轮播图的bug&#39;</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> nowAndFetureLog <span class="token operator">=</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">&#39;FETURE&#39;</span><span class="token punctuation">)</span>
<span class="token function">nowAndFetureLog</span><span class="token punctuation">(</span><span class="token string">&#39;添加新功能~&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自动柯里化函数" tabindex="-1"><a class="header-anchor" href="#自动柯里化函数" aria-hidden="true">#</a> 自动柯里化函数</h2><p>目前我们有将多个普通的函数，转成柯里化函数：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">add1</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">add2</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  x <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">2</span>
  y <span class="token operator">=</span> y <span class="token operator">*</span> <span class="token number">2</span>
  z <span class="token operator">=</span> z <span class="token operator">*</span> z
  <span class="token keyword">return</span> x <span class="token operator">+</span> y <span class="token operator">+</span> z
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">log</span><span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">][</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>type<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]: [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>message<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>柯里化函数的实现 hyCurrying</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">hyCurrying</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">function</span> <span class="token function">curried</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 判断当前已经接收的参数的个数, 可以参数本身需要接受的参数是否已经一致了</span>
    <span class="token comment">// 1.当已经传入的参数 大于等于 需要的参数时, 就执行函数</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>args<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// fn(...args)</span>
      <span class="token comment">// fn.call(this, ...args)</span>
      <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 没有达到个数时, 需要返回一个新的函数, 继续来接收的参数</span>
      <span class="token keyword">function</span> <span class="token function">curried2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 接收到参数后, 需要递归调用curried来检查函数的个数是否达到</span>
        <span class="token keyword">return</span> <span class="token function">curried</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>args2<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> curried2
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> curried
<span class="token punctuation">}</span>

<span class="token keyword">var</span> curryAdd <span class="token operator">=</span> <span class="token function">hyCurrying</span><span class="token punctuation">(</span>add1<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryAdd</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryAdd</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">curryAdd</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="理解组合函数" tabindex="-1"><a class="header-anchor" href="#理解组合函数" aria-hidden="true">#</a> 理解组合函数</h2><p>组合（Compose）函数是在 JavaScript 开发过程中一种对函数的使用技巧、模式：</p><p>比如我们现在需要对某一个数据进行函数的调用，执行两个函数 fn1 和 fn2，这两个函数是依次执行的；那么如果每次我们都需要进行两个函数的调用，操作上就会显得重复；那么是否可以将这两个函数组合起来，自动依次调用呢？这个过程就是对函数的组合，我们称之为 组合函数（Compose Function）；</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">**</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> count <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token function">double</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>

<span class="token comment">// 实现最简单的组合函数</span>
<span class="token keyword">function</span> <span class="token function">composeFn</span><span class="token punctuation">(</span><span class="token parameter">m<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">n</span><span class="token punctuation">(</span><span class="token function">m</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> newFn <span class="token operator">=</span> <span class="token function">composeFn</span><span class="token punctuation">(</span>double<span class="token punctuation">,</span> square<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">newFn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实现组合函数" tabindex="-1"><a class="header-anchor" href="#实现组合函数" aria-hidden="true">#</a> 实现组合函数</h2><p>刚才我们实现的 compose 函数比较简单，我们需要考虑更加复杂的情况：比如传入了更多的函数，在调用 compose 函数时，传入了更多的参数：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">hyCompose</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> length <span class="token operator">=</span> fns<span class="token punctuation">.</span>length
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> fns<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token string">&#39;function&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">TypeError</span><span class="token punctuation">(</span><span class="token string">&#39;Expected arguments are functions&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">function</span> <span class="token function">compose</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> length <span class="token operator">?</span> fns<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span> <span class="token operator">:</span> args
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">++</span>index <span class="token operator">&lt;</span> length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> fns<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> result
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> compose
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">double</span><span class="token punctuation">(</span><span class="token parameter">m</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> m <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">square</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> n <span class="token operator">**</span> <span class="token number">2</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> newFn <span class="token operator">=</span> <span class="token function">hyCompose</span><span class="token punctuation">(</span>double<span class="token punctuation">,</span> square<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">newFn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></div></div><div class="card-box card-wrapper post-tocs"><header><h3 class="title"><i class="iconfont icon-categorynormal"></i><span> 目录 </span></h3></header><nav class="vuepress-toc"><ul class="vuepress-toc-list"><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#理解-javascript-纯函数" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="理解 JavaScript 纯函数">理解 JavaScript 纯函数</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#副作用的理解" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="副作用的理解">副作用的理解</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#纯函数的案例" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="纯函数的案例">纯函数的案例</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#纯函数的练习" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="纯函数的练习">纯函数的练习</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#纯函数的优势" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="纯函数的优势">纯函数的优势</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#javascript-柯里化" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="JavaScript 柯里化">JavaScript 柯里化</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#柯里化的结构" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="柯里化的结构">柯里化的结构</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#让函数的职责单一" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="让函数的职责单一">让函数的职责单一</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#柯里化的复用" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="柯里化的复用">柯里化的复用</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#打印日志的柯里化" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="打印日志的柯里化">打印日志的柯里化</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#自动柯里化函数" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="自动柯里化函数">自动柯里化函数</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#理解组合函数" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="理解组合函数">理解组合函数</a><!--[--><!--]--></li><li class="vuepress-toc-item"><a aria-current="page" href="/f678ec54116e1278bf9cf4fba44a52bb/#实现组合函数" class="router-link-active router-link-exact-active vuepress-toc-link" arialabel="实现组合函数">实现组合函数</a><!--[--><!--]--></li></ul></nav></div></div></main><footer class="theme-footer theme-common-footer"><div class="copyright"><a class="beian" href="https://beian.miit.gov.cn/#/Integrated/index">Apache-2.0</a><span class="delimiter">|</span><span class="info">Copyright © 2018-2022 lizhi1026.top</span></div></footer><div style="display:none;" class="back-to-top"><i class="iconfont icon-back-to-top"></i></div><!--]--><!--]--><!--]--></div>
    <script src="/assets/js/runtime~app.56da2130.js" defer></script><script src="/assets/js/4666.93202135.js" defer></script><script src="/assets/js/app.942499dd.js" defer></script>
  </body>
</html>
